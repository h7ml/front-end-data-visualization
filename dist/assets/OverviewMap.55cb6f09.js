import{q as e,s as t,B as a,k as o,C as i,b as n,o as s}from"./vendor.1e7a51da.js";import{T as l}from"./TileImage.6719d572.js";import{c1 as r,c2 as p,E as d,bW as c,bZ as h,c3 as v,P as _,b2 as u,c4 as m,V as g,c5 as w,q as b,o as f,v as y,ad as E,c6 as x,c0 as C,c7 as V,b$ as R,bX as O,aa as L,M,bY as I}from"./ol.bbcea228.js";import{O as T}from"./OSM.b07225a9.js";import{O as P,a as N}from"./Overlay.0513226a.js";import"./XYZ.4ee3e030.js";var S,W=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.createRenderer=function(){return new r(this)},t}(p),z=function(e){function t(t){var a=this,o=t||{};(a=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).boundHandleRotationChanged_=a.handleRotationChanged_.bind(a),a.collapsed_=void 0===o.collapsed||o.collapsed,a.collapsible_=void 0===o.collapsible||o.collapsible,a.collapsible_||(a.collapsed_=!1),a.rotateWithView_=void 0!==o.rotateWithView&&o.rotateWithView,a.viewExtent_=void 0;var i=void 0!==o.className?o.className:"ol-overviewmap",n=void 0!==o.tipLabel?o.tipLabel:"Overview map",s=void 0!==o.collapseLabel?o.collapseLabel:"«";"string"==typeof s?(a.collapseLabel_=document.createElement("span"),a.collapseLabel_.textContent=s):a.collapseLabel_=s;var l=void 0!==o.label?o.label:"»";"string"==typeof l?(a.label_=document.createElement("span"),a.label_.textContent=l):a.label_=l;var r=a.collapsible_&&!a.collapsed_?a.collapseLabel_:a.label_,p=document.createElement("button");p.setAttribute("type","button"),p.title=n,p.appendChild(r),p.addEventListener(d.CLICK,a.handleClick_.bind(a),!1),a.ovmapDiv_=document.createElement("div"),a.ovmapDiv_.className="ol-overviewmap-map",a.view_=o.view,a.ovmap_=new j({view:o.view});var _=a.ovmap_;o.layers&&o.layers.forEach((function(e){_.addLayer(e)}));var u=document.createElement("div");u.className="ol-overviewmap-box",u.style.boxSizing="border-box",a.boxOverlay_=new P({position:[0,0],positioning:N.CENTER_CENTER,element:u}),a.ovmap_.addOverlay(a.boxOverlay_);var m=i+" "+c+" "+h+(a.collapsed_&&a.collapsible_?" "+v:"")+(a.collapsible_?"":" ol-uncollapsible"),g=a.element;g.className=m,g.appendChild(a.ovmapDiv_),g.appendChild(p);var w=a,b=a.boxOverlay_,f=a.boxOverlay_.getElement(),y=function(e){var t,a={clientX:(t=e).clientX,clientY:t.clientY},o=_.getEventCoordinateInternal(a);b.setPosition(o)},E=function(e){var t=_.getEventCoordinateInternal(e);w.getMap().getView().setCenterInternal(t),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",E)};return f.addEventListener("mousedown",(function(){window.addEventListener("mousemove",y),window.addEventListener("mouseup",E)})),a}return W(t,e),t.prototype.setMap=function(t){var a=this.getMap();if(t!==a){if(a){var o=a.getView();o&&this.unbindView_(o),this.ovmap_.setTarget(null)}if(e.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(_(t,u.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var i=t.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}},t.prototype.handleMapPropertyChange_=function(e){if(e.key===m.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var a=this.getMap().getView();this.bindView_(a)}else this.ovmap_.isRendered()||e.key!==m.TARGET&&e.key!==m.SIZE||this.ovmap_.updateSize()},t.prototype.bindView_=function(e){if(!this.view_){var t=new g({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(w.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()},t.prototype.unbindView_=function(e){e.removeChangeListener(w.ROTATION,this.boundHandleRotationChanged_)},t.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},t.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var a=e.getSize(),o=e.getView().calculateExtentInternal(a);if(!this.viewExtent_||!b(o,this.viewExtent_)){this.viewExtent_=o;var i=t.getSize(),n=t.getView().calculateExtentInternal(i),s=t.getPixelFromCoordinateInternal(f(o)),l=t.getPixelFromCoordinateInternal(y(o)),r=Math.abs(s[0]-l[0]),p=Math.abs(s[1]-l[1]),d=i[0],c=i[1];r<.1*d||p<.1*c||r>.75*d||p>.75*c?this.resetExtent_():E(n,o)||this.recenter_()}}},t.prototype.resetExtent_=function(){var e=this.getMap(),t=this.ovmap_,a=e.getSize(),o=e.getView().calculateExtentInternal(a),i=t.getView(),n=Math.log(7.5)/Math.LN2,s=1/(.1*Math.pow(2,n/2));x(o,s),i.fitInternal(C(o))},t.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,a=e.getView();t.getView().setCenterInternal(a.getCenterInternal())},t.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var a=e.getSize(),o=e.getView(),i=t.getView(),n=this.rotateWithView_?0:-o.getRotation(),s=this.boxOverlay_,l=this.boxOverlay_.getElement(),r=o.getCenterInternal(),p=o.getResolution(),d=i.getResolution(),c=a[0]*p/d,h=a[1]*p/d;if(s.setPosition(r),l){l.style.width=c+"px",l.style.height=h+"px";var v="rotate("+n+"rad)";l.style.transform=v}}},t.prototype.updateBoxAfterOvmapIsRendered_=function(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=V(this.ovmap_,L.POSTRENDER,(function(e){delete this.ovmapPostrenderKey_,this.updateBox_()}),this))},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(v),this.collapsed_?R(this.collapseLabel_,this.label_):R(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.setRotateWithView=function(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},t.prototype.getOverviewMap=function(){return this.ovmap_},t.prototype.render=function(e){this.validateExtent_(),this.updateBox_()},t}(O);e("data-v-33c74a39");const A={id:"map",class:"map__x"};t();const B={setup(e){const t=a(),r=o(null);return i((()=>{t.commit("setComponentPath","src/views/OpenLayers/Basic/pages/OverviewMap/OverviewMap.vue"),r.value=new M({target:"map",layers:[new l({source:new T})],view:new g({projection:"EPSG:4326",center:[114.064839,22.548857],zoom:12}),controls:I().extend([new z({className:"ol-overviewmap ol-custom-overviewmap",layers:[new l({source:new T({url:"https://{a-c}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=0e6fc415256d4fbb9b5166a718591d71"})})],collapseLabel:"»",label:"«",collapsed:!1})])})})),(e,t)=>(s(),n("div",A))},__scopeId:"data-v-33c74a39"};export{B as default};
