import{bx as t,aK as i,b4 as e,b7 as o,by as r,bz as n,bA as s,ba as a,av as l,bB as h,as as f,bC as u,bi as d,be as p}from"./ol.fd4c2e5b.js";import{b as c}from"./Vector.4c604db4.js";function v(e,o,r,n,s,a,l){var h,f,u=(r-o)/n;if(1===u)h=o;else if(2===u)h=o,f=s;else if(0!==u){for(var d=e[o],p=e[o+1],c=0,v=[0],C=o+n;C<r;C+=n){var g=e[C],y=e[C+1];c+=Math.sqrt((g-d)*(g-d)+(y-p)*(y-p)),v.push(c),d=g,p=y}var _=s*c,b=t(v,_);b<0?(f=(_-v[-b-2])/(v[-b-1]-v[-b-2]),h=o+(-b-2)*n):h=o+b*n}var m=l>1?l:2,M=a||new Array(m);for(C=0;C<m;++C)M[C]=void 0===h?NaN:void 0===f?e[h+C]:i(e[h+C],e[h+n+C],f);return M}function C(t,e,o,r,n,s){if(o==e)return null;var a;if(n<t[e+r-1])return s?((a=t.slice(e,e+r))[r-1]=n,a):null;if(t[o-1]<n)return s?((a=t.slice(o-r,o))[r-1]=n,a):null;if(n==t[e+r-1])return t.slice(e,e+r);for(var l=e/r,h=o/r;l<h;){var f=l+h>>1;n<t[(f+1)*r-1]?h=f:l=f+1}var u=t[l*r-1];if(n==u)return t.slice((l-1)*r,(l-1)*r+r);var d=(n-u)/(t[(l+1)*r-1]-u);a=[];for(var p=0;p<r-1;++p)a.push(i(t[(l-1)*r+p],t[l*r+p],d));return a.push(n),a}function g(t,i,e,o,r,n,s){if(s)return C(t,i,e[e.length-1],o,r,n);var a;if(r<t[o-1])return n?((a=t.slice(0,o))[o-1]=r,a):null;if(t[t.length-1]<r)return n?((a=t.slice(t.length-o))[o-1]=r,a):null;for(var l=0,h=e.length;l<h;++l){var f=e[l];if(i!=f){if(r<t[i+o-1])return null;if(r<=t[f-1])return C(t,i,f,o,r,!1);i=f}}return null}var y,_=(y=function(t,i){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}y(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),b=function(t){function i(i,e){var o=t.call(this)||this;return o.flatMidpoint_=null,o.flatMidpointRevision_=-1,o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===e||Array.isArray(i[0])?o.setCoordinates(i,e):o.setFlatCoordinates(e,i),o}return _(i,t),i.prototype.appendCoordinate=function(t){this.flatCoordinates?e(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},i.prototype.clone=function(){var t=new i(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},i.prototype.closestPointXY=function(t,i,e,s){return s<o(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,e,s))},i.prototype.forEachSegment=function(t){return s(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},i.prototype.getCoordinateAtM=function(t,i){if(this.layout!=a.XYM&&this.layout!=a.XYZM)return null;var e=void 0!==i&&i;return C(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},i.prototype.getCoordinates=function(){return l(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},i.prototype.getCoordinateAt=function(t,i){return v(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)},i.prototype.getLength=function(){return c(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},i.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},i.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=h(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new i(e,a.XY)},i.prototype.getType=function(){return f.LINE_STRING},i.prototype.intersectsExtent=function(t){return u(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},i.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=d(this.flatCoordinates,0,t,this.stride),this.changed()},i}(p);export{b as L,v as i,g as l};
